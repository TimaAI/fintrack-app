<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="#4F46E5"/>
                    <path d="M16 8L24 16L16 24L8 16L16 8Z" fill="white"/>
                </svg>
                <h1>FinTrack</h1>
            </div>
            <div style="display: flex; gap: 16px; align-items: center;">
                <span style="color: var(--text-light);">üë§ {{ user.username }}</span>
                <a href="{% url 'profile' %}" class="btn btn-small">–ü—Ä–æ—Ñ–∏–ª—å</a>
                <a href="{% url 'logout' %}" class="btn btn-small">–í—ã–π—Ç–∏</a>
            </div>
            <div class="balance-card">
                <div class="balance-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div class="balance-amount" id="balanceAmount">0 ‚Ç∏</div>
            </div>
        </header>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card income">
                <div class="stat-icon">‚Üë</div>
                <div class="stat-info">
                    <div class="stat-label">–î–æ—Ö–æ–¥—ã</div>
                    <div class="stat-value" id="totalIncome">0 ‚Ç∏</div>
                </div>
            </div>
            <div class="stat-card expense">
                <div class="stat-icon">‚Üì</div>
                <div class="stat-info">
                    <div class="stat-label">–†–∞—Å—Ö–æ–¥—ã</div>
                    <div class="stat-value" id="totalExpense">0 ‚Ç∏</div>
                </div>
            </div>
            <div class="stat-card analytics">
                <div class="stat-icon">üìä</div>
                <div class="stat-info">
                    <div class="stat-label">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ –º–µ—Å—è—Ü</div>
                    <div class="stat-value" id="monthChange">0%</div>
                </div>
            </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
        <div class="analytics-section" id="analyticsSection" style="display: none;">
            <h2>üìà –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–≤—ã—á–µ–∫ —Ç—Ä–∞—Ç</h2>
            <div class="analytics-cards">
                <div class="analytics-card">
                    <h3>–°–∞–º–∞—è –∑–∞—Ç—Ä–∞—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</h3>
                    <div id="topCategory">-</div>
                </div>
                <div class="analytics-card">
                    <h3>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤</h3>
                    <div id="monthComparison">-</div>
                </div>
            </div>
        </div>

        <!-- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å -->
        <div class="calendar-section">
            <h2>üìÖ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</h2>
            <div class="calendar-controls">
                <button class="btn-icon" onclick="changeMonth(-1)">‚Üê</button>
                <h3 id="calendarMonthYear"></h3>
                <button class="btn-icon" onclick="changeMonth(1)">‚Üí</button>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
            
            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –¥–Ω—è -->
            <div id="dayModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close" onclick="closeDayModal()">&times;</span>
                    <h3 id="modalDate"></h3>
                    <div id="modalTransactions"></div>
                </div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
        <div class="form-section">
            <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h2>
            <form id="transactionForm">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-group">
                        <label for="type">–¢–∏–ø</label>
                        <select id="type" required>
                            <option value="expense">–†–∞—Å—Ö–æ–¥</option>
                            <option value="income">–î–æ—Ö–æ–¥</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="category" required>
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JS -->
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="amount">–°—É–º–º–∞ (‚Ç∏)</label>
                        <input type="number" id="amount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="date">–î–∞—Ç–∞</label>
                        <input type="datetime-local" id="date" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea id="description" rows="2"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
        <div class="transactions-section">
            <div class="section-header">
                <h2>üìù –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                <div class="filter-buttons">
                    <button class="btn btn-small" onclick="filterTransactions('all')">–í—Å–µ</button>
                    <button class="btn btn-small" onclick="filterTransactions('income')">–î–æ—Ö–æ–¥—ã</button>
                    <button class="btn btn-small" onclick="filterTransactions('expense')">–†–∞—Å—Ö–æ–¥—ã</button>
                </div>
            </div>
            <div id="transactionsList">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>